#!/usr/bin/env bash
set -euo pipefail

if [ "$(uname -s)" = "Darwin" ]; then
  echo "dictation-hotkeys is Linux-only (xbindkeys)."
  echo "On macOS, use Karabiner-Elements â€” see docs/MACOS.md"
  exit 0
fi

if [ -z "${DISPLAY:-}" ]; then
  for x in /tmp/.X11-unix/X*; do
    DISPLAY=":${x##*/X}" && break
  done
  export DISPLAY
fi
xset -r 135 || true
xset -r 147 || true
pkill xbindkeys 2>/dev/null || true
exec xbindkeys -f "$HOME/.xbindkeysrc"
